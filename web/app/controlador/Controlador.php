<?phpclass Controlador {    private $Modules;    function __construct() {        date_default_timezone_set('America/Bogota');        session_start();    }    public function cargarPagina() {        $this->Modules = $this->getModules();        $modulo = (end($this->Modules) && strlen(end($this->Modules)) > 0) ? end($this->Modules) : "inicio";        if ($modulo === 'killsession') {            return $this->cerrarCesion();        }        if ($this->validarSesion($modulo)) {            echo $this->cargarHTML($modulo);        } else {            echo $this->cargarLogin('inicio');        }    }    private function validarSesion($modulo) {        return true;        $taquilla = isset($_SESSION['taquilla_id']) ? $_SESSION['taquilla_id'] : null;        if (!$taquilla || $taquilla === '') {            return false;        }        return true;    }    private function cargarHTML($ms) {                $archivo = $ms;        $mod = null;        foreach($this->Modules as $r){            $mod .= '/' . $r;        }        $pagina = file_get_contents('app/vista/pagmaestra.html');        $modulo = file_get_contents('app/vista/forma' . $mod . '/' . $archivo . '.html');        $menu = file_get_contents('app/vista/assets/menu.admin.html');        $render = str_replace(['##MENUPRINCIPAL##', '##CONTENIDOS##', '##MODULO##', '##MODULOJS##'], [$menu, $modulo, $archivo, $mod], $pagina);        return $render;    }    private function cargarLogin($ms) {        $archivo = $ms;        $mod = $ms;        if (strpos($ms, '/')) {            $submodulo = substr($ms, strpos($ms, '/') + 1);            $archivo = substr($ms, 0, strpos($ms, '/'));            $archivo = 'modulo/' . $submodulo . '/' . substr($ms, strpos($ms, '/') + 1);            $mod = substr($ms, 0, strpos($ms, '/'));        }        $pagina = file_get_contents('app/vista/pagmaestra.html');        $modulo = file_get_contents('app/vista/forma/inicio/login.html');        $render = str_replace(['##CONTENIDOS##', '##MODULO##', '##MODULOJS##'], [$modulo, $archivo, $mod], $pagina);                return $render;    }    public function cerrarCesion() {        unset($_SESSION['taquilla_id']);        header('Location: /');        return true;    }    private function getModules() {        $requestUri = substr($_SERVER['REQUEST_URI'], 1);        $modules = explode('/', $requestUri);        return $modules;    }}